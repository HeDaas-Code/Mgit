# MGit Copilot 使用指南

## 概述

MGit Copilot 是一个专注于写作的AI助手，集成了最新的大语言模型技术，为Markdown文档创作提供智能支持。

## 功能特性

### 1. 行内补全 (Inline Completion)
- **快捷键**: `Alt+\`
- **功能**: 根据当前文本上下文，智能生成后续内容
- **使用场景**: 文章续写、段落补全、思路拓展

### 2. 编辑模式 (Edit Mode)
- **快捷键**: `Ctrl+Shift+E`
- **功能**: 根据指令对文本进行编辑和优化
- **使用场景**: 
  - 润色文字
  - 修正语法错误
  - 调整文章语气
  - 重写段落

### 3. 创作模式 (Creation Mode)
- **快捷键**: `Ctrl+Shift+C`
- **功能**: 从提示词生成新内容
- **支持类型**:
  - Markdown文档
  - 技术文章
  - 文章大纲
  - 学习笔记
  - 项目报告
  - README文档

### 4. 对话模式 (Conversation Mode)
- **功能**: 与AI助手进行自然对话
- **使用场景**:
  - 咨询写作建议
  - 讨论文章结构
  - 获取创作灵感
  - 解答疑问

### 5. 代理模式 (Agent Mode)
- **功能**: 自动执行文档相关任务
- **支持操作**:
  - 读取文档
  - 编辑文档
  - 创建文档
  - 创建Git分支
  - 提交更改
- **审计系统**: 所有修改操作需要人工审核后才会应用

## 快速开始

### 1. 配置API密钥

MGit Copilot 支持两种大模型服务提供商：

#### 选项1: SiliconFlow (默认)
1. 访问 [SiliconFlow官网](https://siliconflow.cn) 注册账号并获取API密钥
2. 在MGit中打开 `Copilot > Copilot设置`
3. 选择 "SiliconFlow" 作为提供商
4. 输入API密钥
5. 选择模型（推荐使用 Qwen/Qwen2.5-7B-Instruct）
6. 勾选"启用Copilot"
7. 点击"测试连接"验证配置
8. 点击"保存"

#### 选项2: ModelScope API-Inference (新增!)
1. 访问 [ModelScope官网](https://www.modelscope.cn) 注册账号并获取API密钥
2. 在MGit中打开 `Copilot > Copilot设置`
3. 选择 "ModelScope" 作为提供商
4. 输入API密钥
5. 选择模型（推荐使用 qwen/Qwen2.5-7B-Instruct）
6. 勾选"启用Copilot"
7. 点击"测试连接"验证配置
8. 点击"保存"

**注意**: 两个提供商的模型名称格式略有不同（ModelScope使用小写命名空间）

### 2. 显示Copilot面板

- 方式1: 点击菜单 `Copilot > 显示Copilot面板`
- 方式2: 使用快捷键（如已配置）

### 3. 使用行内补全

1. 在编辑器中输入文本
2. 将光标放在需要补全的位置
3. 按 `Alt+\` 或点击菜单 `Copilot > 行内补全`
4. 等待AI生成内容并自动插入

### 4. 使用编辑模式

1. 在编辑器中选择要编辑的文本
2. 按 `Ctrl+Shift+E` 或点击菜单 `Copilot > 编辑文本`
3. 在Copilot面板的"编辑模式"中：
   - 将原文粘贴到"原文"框
   - 在"编辑指令"框输入指令（例如："润色文字，使其更加专业"）
   - 点击"执行编辑"
4. 查看编辑结果

### 5. 使用创作模式

1. 按 `Ctrl+Shift+C` 或点击菜单 `Copilot > 创作内容`
2. 在Copilot面板的"创作模式"中：
   - 选择内容类型
   - 在"创作提示"框输入详细描述
   - 点击"开始创作"
3. 选择是否将生成的内容插入编辑器

### 6. 使用对话模式

1. 在Copilot面板切换到"对话"标签
2. 在输入框输入问题或指令
3. 点击"发送"或按Enter
4. 查看AI的回复

## 代理模式与任务审计

### 什么是代理模式？

代理模式允许AI自主执行一系列文档操作任务，类似于GitHub的分支和PR工作流。所有修改性操作都需要经过审计才能最终应用。

### 任务审计流程

1. **任务创建**: AI代理创建任务（如编辑文档、创建分支等）
2. **任务执行**: 代理执行任务并生成结果
3. **等待审计**: 任务状态变为"审计中"，等待人工审核
4. **审计决策**: 用户审查任务结果，选择批准或拒绝
5. **应用更改**: 批准的任务将其更改应用到实际文件

### 如何审计任务

1. 在Copilot面板切换到"代理"标签
2. 查看待审计任务列表
3. 选择一个任务
4. 点击"审计任务"
5. 在弹出的对话框中：
   - 查看任务详情
   - 输入审计意见
   - 选择"批准"或"拒绝"

### 审计建议

- **仔细检查**: 审查AI生成的内容是否符合预期
- **测试修改**: 对于代码或配置文件的修改，建议先在测试环境验证
- **记录意见**: 提供清晰的审计意见，有助于追踪决策过程
- **及时处理**: 及时处理待审计任务，避免积压

## 最佳实践

### 1. 编写高质量提示词

**好的提示词示例**:
```
请写一篇关于Python装饰器的技术文章，要求：
1. 解释装饰器的基本概念和用途
2. 提供3-4个实用示例
3. 说明装饰器的高级用法（如带参数的装饰器）
4. 包含最佳实践建议
5. 文章长度1500-2000字
```

**差的提示词示例**:
```
写一篇关于Python的文章
```

### 2. 利用上下文

- 在使用行内补全时，保持前文内容连贯
- 提供足够的背景信息
- 明确文章的目标读者和风格

### 3. 迭代优化

- 不满意的结果可以修改提示词重新生成
- 使用编辑模式对生成内容进行微调
- 结合人工编辑和AI辅助，发挥各自优势

### 4. 合理使用模式

- **行内补全**: 适合快速续写，保持思路流畅
- **编辑模式**: 适合优化已有内容
- **创作模式**: 适合从零开始创作
- **对话模式**: 适合寻求建议和灵感
- **代理模式**: 适合批量处理或复杂任务

## 模型选择

### 推荐模型

1. **Qwen/Qwen2.5-7B-Instruct** (推荐)
   - 平衡性能和质量
   - 适合大多数写作场景
   - 响应速度快

2. **Qwen/Qwen2.5-14B-Instruct**
   - 更高质量的输出
   - 适合专业写作
   - 略慢但更准确

3. **Qwen/Qwen2.5-32B-Instruct**
   - 最高质量
   - 适合重要文档
   - 响应较慢

4. **deepseek-ai/DeepSeek-V2.5**
   - 强大的推理能力
   - 适合技术写作
   - 支持复杂指令

### 如何选择

- **日常写作**: Qwen2.5-7B
- **专业内容**: Qwen2.5-14B
- **重要文档**: Qwen2.5-32B
- **技术文章**: DeepSeek-V2.5

## 常见问题

### Q: API调用失败怎么办？

**A**: 
1. 检查API密钥是否正确
2. 确认网络连接正常
3. 验证服务提供商账户余额（SiliconFlow或ModelScope）
4. 确保选择的提供商与API密钥匹配
5. 查看错误信息，按提示操作

### Q: 生成的内容质量不理想？

**A**:
1. 优化提示词，提供更详细的要求
2. 尝试更换模型
3. 调整temperature参数（在代码中）
4. 多次生成，选择最佳结果

### Q: 如何保护隐私？

**A**:
1. API密钥以明文存储在本地配置文件，请确保操作系统账户和配置文件的访问权限安全
2. 不要在提示词中包含敏感信息
3. 审计模式可以预览所有修改
4. 可以随时禁用Copilot功能

### Q: Copilot会自动保存内容吗？

**A**:
- 行内补全直接插入编辑器，随文档保存
- 编辑和创作结果显示在面板，需手动应用
- 代理模式的修改需通过审计才会应用
- 对话历史暂存在内存，关闭面板后清空

### Q: 如何提供反馈？

**A**:
1. 通过GitHub Issues报告问题
2. 在审计任务时提供详细意见
3. 分享使用经验和建议

## 注意事项

1. **AI辅助而非替代**: Copilot是辅助工具，不能完全替代人工创作
2. **内容审查**: AI生成的内容可能包含错误，需要人工审查
3. **版权意识**: 确保生成内容不侵犯版权
4. **数据安全**: 不要将敏感信息发送给AI
5. **合理使用**: 遵守API使用条款，避免滥用

## 技术支持

- **文档**: 参考本指南和项目README
- **配置指南**: [Copilot配置文档](./copilot_config.md)
- **问题反馈**: 提交GitHub Issue
- **功能建议**: 通过PR或Issue提出
- **SiliconFlow API文档**: https://docs.siliconflow.cn
- **ModelScope API文档**: https://www.modelscope.cn/docs/model-service/API-Inference/intro

## 更新日志

### Version 1.1.0 (2026-01-07)

- 新增ModelScope API-Inference服务提供商支持
- 支持在SiliconFlow和ModelScope之间切换
- 更新配置文档，详细说明两个提供商的使用

### Version 1.0.0 (2026-01-03)

- 初始版本发布
- 支持行内补全
- 支持编辑模式
- 支持创作模式
- 支持对话模式
- 支持代理模式
- 集成任务审计系统
- 使用SiliconFlow API

## 未来计划

- [ ] 支持流式输出
- [ ] 添加更多模型选择
- [ ] 优化提示词模板
- [ ] 增强代理模式功能
- [ ] 支持自定义指令集
- [ ] 添加使用统计功能
- [ ] 支持多语言界面
