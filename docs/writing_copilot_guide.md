# 写作Copilot插件使用指南

## 概述

写作Copilot是MGit的AI驱动写作助手插件，旨在为用户提供类似GitHub Copilot的智能写作体验。该插件集成了先进的AI技术，帮助用户更高效地创作、编辑和管理Markdown文档。

## 核心功能

### 1. 行内补全（Inline Completion）
自动感知上下文，智能生成文本续写建议，让写作过程更加流畅。

### 2. 编辑模式（Edit Mode）
提供多种文本编辑功能：
- 改进写作质量
- 修正语法错误
- 扩展和详细化内容
- 简化复杂表述
- 重写优化

### 3. 创作模式（Creation Mode）
基于用户提示生成全新内容，支持各种类型的文档创作。

### 4. 对话模式（Chat Mode）
与AI助手进行自然语言对话，获取写作建议和技术支持。

### 5. 代理模式（Agent Mode）
智能代理可以使用工具自动完成复杂任务：
- 读取和编辑文档
- 管理Git分支和提交
- 批量处理文档
- 执行多步骤工作流

### 6. 任务审查系统（Task Review）
类似GitHub Pull Request的审查机制：
- 查看代理执行的任务详情
- 审查更改内容
- 批准或拒绝任务
- 控制更改的应用时机

## 技术架构

### API支持
- **默认提供商**: SiliconFlow (https://siliconflow.cn/)
- **支持模型**: 
  - DeepSeek V2.5
  - Qwen2.5 7B
  - GLM-4 9B
  - Llama 3.1 8B

### 开发框架
- **AI框架**: Langchain
- **语言模型**: OpenAI兼容接口
- **代理系统**: Langchain Agent Framework

### 插件系统
基于MGit的插件架构开发，完全集成到主应用中。

## 快速开始

### 1. 安装依赖

```bash
pip install langchain langchain-community langchain-openai openai
```

### 2. 获取API密钥

访问 [SiliconFlow](https://siliconflow.cn/) 注册并获取API密钥。

### 3. 配置插件

在MGit中：
1. 打开"插件管理"
2. 启用"写作Copilot"
3. 配置API密钥和模型

### 4. 开始使用

打开或创建Markdown文档，开始享受AI辅助写作！

## 使用场景

### 技术文档编写
- 快速生成API文档
- 自动补全代码示例
- 优化技术描述

### 博客写作
- 生成文章大纲
- 扩展内容细节
- 改进语言表达

### 项目文档管理
- 批量更新文档
- 维护版本一致性
- 生成索引和目录

### 内容翻译
- 翻译技术文档
- 保持术语一致性
- 批量处理多文件

## 详细文档

完整的插件文档位于 `/plugins/writing_copilot/` 目录：

- **README.md**: 详细功能说明和配置指南
- **QUICKSTART.md**: 快速开始指南
- **EXAMPLES.md**: 丰富的使用示例
- **config.example.json**: 配置模板

## 特色功能

### 智能上下文感知
插件能够理解当前文档的上下文，提供相关且准确的建议。

### 多模式切换
根据不同需求，在多种工作模式间灵活切换。

### 任务审查机制
代理模式下的所有更改都可以先审查再应用，确保内容质量和安全性。

### 工具链集成
与Git、文档系统无缝集成，实现端到端的自动化工作流。

### 可配置性强
丰富的配置选项，适应不同用户的使用习惯。

## 安全性

### API密钥保护
- API密钥加密存储
- 不会显示在日志中
- 支持环境变量配置

### 代码执行控制
- 所有代理操作需要用户批准
- 提供详细的执行日志
- 支持回滚机制

### 数据隐私
- 不存储用户文档内容
- API调用仅发送必要上下文
- 支持本地模型部署（未来功能）

## 性能优化

### 响应速度
- 异步处理，不阻塞UI
- 智能缓存机制
- 可配置的上下文长度

### 成本控制
- 支持手动触发模式
- 可调整API调用频率
- 提供使用统计

## 故障排除

### 常见问题

**Q: 插件无法加载？**
A: 检查依赖是否正确安装，查看日志获取详细错误信息。

**Q: API调用失败？**
A: 验证API密钥、网络连接和API余额。

**Q: 补全不工作？**
A: 确认已启用相关功能，检查触发方式设置。

更多问题请查看完整文档或在GitHub提交Issue。

## 路线图

### 已实现
- ✅ 行内补全
- ✅ 编辑模式
- ✅ 创作模式
- ✅ 对话模式
- ✅ 代理模式
- ✅ 任务审查系统

### 计划中
- 🔄 支持更多AI模型
- 🔄 本地模型集成
- 🔄 自定义提示词模板
- 🔄 协作功能
- 🔄 使用统计和分析
- 🔄 多语言界面

## 贡献

欢迎贡献代码、报告问题和提出建议！

### 如何贡献

1. Fork项目仓库
2. 创建功能分支
3. 提交更改
4. 发起Pull Request

### 开发指南

参考 [插件开发指南](./plugin_development.md) 了解MGit插件开发的详细信息。

## 支持

- **文档**: `/plugins/writing_copilot/README.md`
- **示例**: `/plugins/writing_copilot/EXAMPLES.md`
- **问题**: GitHub Issues
- **讨论**: GitHub Discussions

## 许可证

本插件遵循MIT许可证，与MGit主项目保持一致。

## 致谢

- **GitHub Copilot**: 设计灵感来源
- **SiliconFlow**: AI模型API支持
- **Langchain**: 强大的AI应用开发框架
- **MGit社区**: 持续的支持和反馈

---

**开始使用写作Copilot，让AI成为您的写作伙伴！** 🚀
